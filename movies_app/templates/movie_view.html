{% extends "index.html" %}


{% block content %}
<script>
    document.addEventListener("DOMContentLoaded", () => {
      const modal = new bootstrap.Modal(document.getElementById("movieModal"));
      modal.show();
    });
          
</script>
</script>
<div class="modal fade" id="movieModal" data-bs-backdrop="static" tabindex="-1" aria-labelledby="movieModal" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-3 text-mine-big">{{ data["Title"] }}</h1> 
                
            </div></button>
            <div class="modal-body padding-entero">
                <div class="container text-center">
                    <div class="row">
                        <div class="col-sm-3">
                            <img class="img-fluid" src="{{ data['Poster'] }}" alt=" {{ data['Title'] }}"><br>
                            <form  method="post">
                                <div class="stars" style="padding-top: 15px;">
                                    <p>(IMDB:{{ data["imdbRating"] }} Users:{{ Urating }})</p>
                                    <span class="fa fa-star" data-value="10"></span>
                                    <span class="fa fa-star" data-value="8"></span>
                                    <span class="fa fa-star" data-value="6"></span>
                                    <span class="fa fa-star" data-value="4"></span>
                                    <span class="fa fa-star" data-value="2"></span>
                                    
                                </div>
                                <input type="hidden" name="rating" id = "rating">
                                <input type="hidden" name="movieID" id="movieID" value="{{ data['imdbID'] }}">
                                <button class="btn btn-outline-success wtw-button" type="submit">Rate!</button>
                                    
                                
                            </form>  
                            <script>
                            document.querySelectorAll(".stars .fa-star").forEach(star => {
                                star.addEventListener("click", function() {
                                    const value = parseInt(this.getAttribute("data-value"));
                                    document.getElementById("rating").value = value;

                                    
                                    document.querySelectorAll(".stars .fa-star").forEach(s => {
                                        s.classList.remove("checked");
                                    });
                                    document.querySelectorAll(".stars .fa-star").forEach(s => {
                                        if (parseInt(s.getAttribute("data-value")) <= value) {
                                            s.classList.add("checked");
                                        }
                                    });
                                });
                            });

                                    
                            </script> 
                        </div>
                    <div class="col-sm-9">
                        <div class="row">
                            <div class="col-8 col-sm-9">
                                <p class="text-mine-sub">{{ data["Plot"] }}</p>
                            </div>
                        </div>
                        <div class ="row">
                            <div class="col-8 col-sm-9"> 
                                <div class="row">
                                    <div class="col"><h5>Genre:</h5></div>
                                    <div class="col"><p>{{ data["Genre"] }}</p> </div>

                                </div>
                                <div class="row">
                                    <div class="col"><h5>Duration:</h5></div><div class="col"><p>{{ data["Runtime"] }}</p> </div>
                                </div>
                                <div class="row">
                                    <div class="col"><h5>Staring:</h5></div><div class="col"><div class="col"><p>{{ data["Actors"] }}</p></div>
                                    
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <ul class="list-group list-group-flush overflow-auto" style="max-height: 180px;">
                                            {% for i in comments %}
                                                
                                            <li class="list-group-item">"{{ i[0] }}" - {{ i[1] }}  <p class="date-comment">{{ i[2] }}</p> </li>
                                            {% endfor %}    
                                        </div>
                                    </div>
                                        


                                    
                                        
                                        
                                        

                                </div>
                                <div class="row">
                                    <div class="col">
                                        <div class="container text-center">
                                            <div class="row">
                                                <div class="col">
                                                    <form method="post" class="d-flex">
                                                        <input type="hidden" name="id" value="{{ data['imbdID'] }}">
                                                        <input type="hidden" name="rating" value="{{ data['imbdRating'] }}">
                                                        <input class="form-control me-2" placeholder="Leave a comment here!" aria-label="Search" type="text" id="commentsInput" name="commentsInput">
                                                        <input class="form-control me-2 short-form" placeholder="(Your name)" type="text" id="commentsName" name="commentsName" required>
                                                        <button class="btn btn-outline-success wtw-button" type="submit">Post!</button>
                                                    </form>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="padding: 0%;">
                <a href="/"><button type="button" class="btn btn-outline-success wtw-button" data-bs-dismiss="modal">Close</button></a>
            </div>
        </div>
    </div>
</div>
                                
                






                
            








{% endblock %}



